{"name":"Scrapple","tagline":"A framework for creating web scrapers and web crawlers","body":"Scrapple\r\n========\r\n\r\n![image](https://travis-ci.org/scrappleapp/scrapple.svg%0A%20:target:%20https://travis-ci.org/scrappleapp/scrapple%0A%20:alt:%20Travis-CI%20Build%20Status)\r\n\r\n![image](https://pypip.in/download/scrapple/badge.svg%0A%20:target:%20https://pypi.python.org/pypi//scrapple%0A%20:alt:%20Downloads)\r\n\r\n![image](https://pypip.in/version/scrapple/badge.svg?text=version%0A%20:target:%20https://pypi.python.org/pypi/scrapple%0A%20:alt:%20Latest%20Version)\r\n\r\n[Scrapple](http://scrappleapp.github.io/scrapple) is a framework for creating web scrapers and web crawlers according to a key-value based configuration file. It provides a command line interface to run the script on a given JSON-based configuration input, as well as a web interface to provide the necessary input.\r\n\r\nThe primary goal of Scrapple is to abstract the process of designing web content extractors. The focus is laid on what to extract, rather than how to do it. The user-specified configuration file contains selector expressions (XPath expressions or CSS selectors) and the attribute to be selected. Scrapple does the work of running this extractor, without the user worrying about writing a program. Scrapple can also be used to generate a Python script that implements the desired extractor.\r\n\r\nInstallation\r\n------------\r\n\r\nYou can install Scrapple by using\r\n\r\n    $ sudo apt-get install libxml2-dev libxslt-dev python-dev lib32z1-dev\r\n    $ pip install scrapple\r\n\r\nOtherwise, you could clone this repository and install the package.\r\n\r\n    $ git clone http://github.com/scrappleapp/scrapple scrapple\r\n    $ cd scrapple\r\n    $ pip install -r requirements.txt\r\n    $ python setup.py install\r\n\r\nHow to use Scrapple\r\n-------------------\r\n\r\nScrapple provides 4 commands to create and implement extractors.\r\n\r\n-   [genconfig](http://scrapple.readthedocs.org/en/latest/framework/commands.html#genconfig)\r\n-   [generate](http://scrapple.readthedocs.org/en/latest/framework/commands.html#generate)\r\n-   [run](http://scrapple.readthedocs.org/en/latest/framework/commands.html#run)\r\n-   [web](http://scrapple.readthedocs.org/en/latest/framework/commands.html#web)\r\n\r\nScrapple implements the desired extractor on the basis of the user-specified configuration file. There are guidelines regarding how to write these configuration files.\r\n\r\nThe configuration file is the basic specification of the extractor required. It contains the URL for the web page to be loaded, the selector expressions for the data to be extracted and in the case of crawlers, the selector expression for the links to be crawled through.\r\n\r\nThe keys used in the configuration file are :\r\n\r\n-   **project\\_name** : Specifies the name of the project with which the configuration file is associated.\r\n-   **selector\\_type** : Specifies the type of selector expressions used. This could be \"xpath\" or \"css\".\r\n-   **scraping** : Specifies parameters for the extractor to be created.  \r\n    -   **url** : Specifies the URL of the base web page to be loaded.\r\n    -   **data** : Specifies a list of selectors for the data to be extracted.  \r\n        -   **selector** : Specifies the selector expression.\r\n        -   **attr** : Specifies the attribute to be extracted from the result of the selector expression.\r\n        -   **field** : Specifies the field name under which this data is to stored.\r\n        -   **default** : Specifies the default value to be used if the selector expression fails.\r\n\r\n    -   **next** : Specifies the crawler implementation.  \r\n        -   **follow\\_link** : Specifies the selector expression for the `<a>` tags to be crawled through.\r\n\r\nThe main objective of the configuration file is to specify extraction rules in terms of selector expressions and the attribute to be extracted. There are certain set forms of selector/attribute value pairs that perform various types of content extraction.\r\n\r\nSelector expressions :\r\n\r\n-   CSS selector or XPath expressions that specify the tag to be selected.\r\n-   \"url\" to take the URL of the current page on which extraction is being performed.\r\n\r\nAttribute selectors :\r\n\r\n-   \"text\" to extract the textual content from that tag.\r\n-   \"href\", \"src\" etc., to extract any of the other attributes of the selected tag.\r\n\r\nTutorials\r\n---------\r\n\r\n[For a more detailed tutorial, check out the [tutorial in the documentation](http://scrapple.readthedocs.org/en/latest/#experimentation-results)]\r\n\r\nIn this simple example for using Scrapple, we'll extract NBA player information from [the ESPN website](http://espn.go.com/nba/teams).\r\n\r\nTo first create the skeleton configuration file, we use the genconfig command.\r\n\r\n    $ scrapple genconfig nba http://espn.go.com/nba/teams --type=crawler\r\n\r\nThis creates nba.json - a sample Scrapple configuration file for a crawler, which uses XPath expressions as selectors. This can be edited and the required follow link selector, data selectors and attributes can be specified.\r\n\r\n~~~~ {.sourceCode .javascript}\r\n{\r\n    \"project_name\": \"nba\",\r\n    \"selector_type\": \"xpath\",\r\n    \"scraping\": {\r\n        \"url\": \"http://espn.go.com/nba/teams\",\r\n        \"data\": [\r\n            {\r\n                \"field\": \"\",\r\n                \"selector\": \"\",\r\n                \"attr\": \"\",\r\n                \"default\": \"\"\r\n            }\r\n        ],\r\n        \"next\": [\r\n            {\r\n                \"follow_link\": \"//*[@class='mod-content']//a[3]\",\r\n                \"scraping\": {\r\n                    \"data\": [\r\n                        {\r\n                            \"field\": \"team\",\r\n                            \"selector\": \"//h2\",\r\n                            \"attr\": \"text\",\r\n                            \"default\": \"<no_team>\"\r\n                        }\r\n                    ],\r\n                    \"next\": [\r\n                        {\r\n                            \"follow_link\": \"//*[@class='mod-content']/table[1]//tr[@class!='colhead']//a\",\r\n                            \"scraping\": {\r\n                                \"data\": [\r\n                                    {\r\n                                        \"field\": \"name\",\r\n                                        \"selector\": \"//h1\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"<no_name>\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"headshot_link\",\r\n                                        \"selector\": \"//*[@class='main-headshot']/img\",\r\n                                        \"attr\": \"src\",\r\n                                        \"default\": \"<no_image>\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"number & position\",\r\n                                        \"selector\": \"//ul[@class='general-info']/li[1]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"<00> #<GFC>\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat1 career\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[@class='career']/td[1]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat2 career\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[@class='career']/td[2]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat3 career\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[@class='career']/td[3]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat1 season\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[1]/td[1]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat2 season\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[1]/td[2]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat3 season\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[1]/td[2]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"season PER\",\r\n                                        \"selector\": \"//table[@class='header-stats']//tr[1]/td[4]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat1\",\r\n                                        \"selector\": \"//table[@class='header-stats']//th[1]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat2\",\r\n                                        \"selector\": \"//table[@class='header-stats']//th[2]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    },\r\n                                    {\r\n                                        \"field\": \"stat3\",\r\n                                        \"selector\": \"//table[@class='header-stats']//th[3]\",\r\n                                        \"attr\": \"text\",\r\n                                        \"default\": \"0.0\"\r\n                                    }                                               \r\n                                ]\r\n                            }\r\n                        }\r\n                    ]                   \r\n                }\r\n            }\r\n        ]\r\n    }\r\n}\r\n~~~~\r\n\r\nThe extractor can be run using the run command -\r\n\r\n    $ scrapple run nba nba_players -o json\r\n\r\nThis creates nba\\_players.json which contains the extracted data. An example snippet of this data :\r\n\r\n~~~~ {.sourceCode .javascript}\r\n{\r\n\r\n    \"project\": \"nba\",\r\n    \"data\": [\r\n\r\n        # nba_players.json continues\r\n\r\n    {\r\n        \"stat3 season\": \"15.0\",\r\n        \"stat2 career\": \"9.0\",\r\n        \"stat1 career\": \"8.0\",\r\n        \"stat3\": \"BLKPG\",\r\n        \"name\": \"DeAndre Jordan\",\r\n        \"stat1\": \"PPG\",\r\n        \"stat3 career\": \"1.7\",\r\n        \"team\": \"Los Angeles Clippers\",\r\n        \"headshot_link\": \"http://a.espncdn.com/combiner/i?img=/i/headshots/nba/players/full/3442.png&w=350&h=254\",\r\n        \"stat2 season\": \"15.0\",\r\n        \"stat1 season\": \"11.5\",\r\n        \"number & position\": \"#6 C\",\r\n        \"season PER\": \"21.05\",\r\n        \"stat2\": \"RPG\"\r\n    },\r\n    {\r\n        \"stat3 season\": \"10.2\",\r\n        \"stat2 career\": \"9.9\",\r\n        \"stat1 career\": \"18.7\",\r\n        \"stat3\": \"RPG\",\r\n        \"name\": \"Chris Paul\",\r\n        \"stat1\": \"PPG\",\r\n        \"stat3 career\": \"4.4\",\r\n        \"team\": \"Los Angeles Clippers\",\r\n        \"headshot_link\": \"http://a.espncdn.com/combiner/i?img=/i/headshots/nba/players/full/2779.png&w=350&h=254\",\r\n        \"stat2 season\": \"10.2\",\r\n        \"stat1 season\": \"19.1\",\r\n        \"number & position\": \"#3 PG\",\r\n        \"season PER\": \"26.04\",\r\n        \"stat2\": \"APG\"\r\n    },\r\n    {\r\n        \"stat3 season\": \"1.8\",\r\n        \"stat2 career\": \"2.0\",\r\n        \"stat1 career\": \"10.8\",\r\n        \"stat3\": \"RPG\",\r\n        \"name\": \"J.J. Redick\",\r\n        \"stat1\": \"PPG\",\r\n        \"stat3 career\": \"1.9\",\r\n        \"team\": \"Los Angeles Clippers\",\r\n        \"headshot_link\": \"http://a.espncdn.com/combiner/i?img=/i/headshots/nba/players/full/3024.png&w=350&h=254\",\r\n        \"stat2 season\": \"1.8\",\r\n        \"stat1 season\": \"16.4\",\r\n        \"number & position\": \"#4 SG\",\r\n        \"season PER\": \"16.23\",\r\n        \"stat2\": \"APG\"\r\n    },\r\n\r\n        # nba_players.json continues\r\n    ]\r\n\r\n}\r\n~~~~\r\n\r\nThe run command can also be used to create a CSV file with the extracted data, using the --output\\_type=csv argument.\r\n\r\nThe generate command can be used to generate a Python script that implements this extractor. In essence, it replicates the execution of the run command.\r\n\r\n    $ scrapple generate nba nba_script -o json\r\n\r\nThis creates nba\\_script.py, which extracts the required data and stores the data in a JSON document.\r\n\r\nDocumentation\r\n-------------\r\n\r\nYou can read the [complete documentation](http://scrapple.rtfd.org) for an extensive coverage on the background behind Scrapple, a thorough explanation on the Scrapple package implementation and a complete coverage of tutorials on how to use Scrapple to run your scraper/crawler jobs.\r\n\r\nAuthors\r\n-------\r\n\r\nScrapple is maintained by [Alex Mathew](http://github.com/AlexMathew) and [Harish Balakrishnan](http://github.com/harishb93).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}